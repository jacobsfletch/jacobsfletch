function touchStartHandler(e){touchStart=e.touches[0].pageY}function scrollHandler(e){scrollDistance=e.deltaY?e.deltaY:e.touches?touchStart-e.touches[0].pageY:null,touchStart=e.touches?e.touches[0].pageY:null}preventDefault=function(e){e.preventDefault()},window.addEventListener("touchmove",preventDefault),window.addEventListener("wheel",preventDefault);var touchStart=0;scrollDistance=0,scrollEnabler=function(e,t){var l=t.scrollTop;elementScrollHeight=t.scrollHeight,elementClientHeight=t.clientHeight,fullBodyScroll=elementScrollHeight-elementClientHeight,l<=fullBodyScroll&&l>=0&&(t.scrollTop=l+scrollDistance)},scrollAnimate=function(e){function t(e){panelCurrentScroll=panelBody.scrollTop,panelIsFullyScrolledUp=0==panelCurrentScroll,panelIsFullyScrolledUp&&(expectedScroll=exploreTop+-scrollDistance,exploreTop=expectedScroll>=originalExploreTop?originalExploreTop:expectedScroll<=0?0:exploreTop+-scrollDistance,explore.style.top=exploreTop+"px",currentRatio=Math.round(100*(exploreTop/originalExploreTop))/100,start.style.opacity=currentRatio),0==exploreTop?(checked=!0,l.classList.add("activated"),barTitleSpan.innerHTML="overview",barSubtitleSpan.innerHTML="down",scrollEnabler(e,panelBody)):exploreTop==originalExploreTop&&(checked=!1,l.classList.remove("activated"),barTitleSpan.innerHTML=originalTitleSpan,barSubtitleSpan.innerHTML=originalSubtitleSpan)}var l=document.querySelector(".app-main");e=l.querySelector(e),start=e.querySelector(".start"),explore=e.querySelector(".explore"),panelBody=explore.querySelector(".panel-body"),barTitleSpan=explore.querySelector(".bar-title").querySelector("span"),barSubtitleSpan=explore.querySelector(".bar-subtitle").querySelector("span"),originalTitleSpan=barTitleSpan.innerHTML,originalSubtitleSpan=barSubtitleSpan.innerHTML,panelScroll=0,panelIsFullyScrolledUp=!0,currentRatio=0,panelCurrentScroll=0,checked=!1,exploreTop=0,fetchVariables=function(){var t=explore.getBoundingClientRect().top;screenBoundingTop=e.getBoundingClientRect().top,exploreTop=t-screenBoundingTop,originalExploreTop=exploreTop},window.addEventListener("resize",function(e){explore.removeAttribute("style"),start.removeAttribute("style"),fetchVariables(),1==checked&&(explore.style.top=0,exploreTop=0)}),e.addEventListener("wheel",function(e){scrollHandler(e),t(e)}),e.addEventListener("touchmove",function(e){scrollHandler(e),t(e)}),e.addEventListener("touchstart",touchStartHandler),fetchVariables()};var app=document.querySelector(".app-main");lightSwitch=app.querySelector(".tool-lightswitch"),appFooter=app.querySelector(".app-footer"),appBody=app.querySelector(".app-body"),lightSwitch.addEventListener("click",function(){app.classList.toggle("docked"),appBody.classList.toggle("hidden"),appFooter.classList.toggle("visible"),lightSwitch.classList.toggle("switched")}),responsiveImages=function(e){var t=window.devicePixelRatio;cards=document.getElementsByClassName(e),status="all",currentImg=null,prevImgWidth=0,scrollContainer=document.querySelector(".panel-body"),scrollPosition=0,finish=function(e){setTimeout(function(){e.classList.remove("deactivated")},1e3)},loadImage=function(e,l){var r=Math.ceil(parseInt(getComputedStyle(e,null).getPropertyValue("width"),10));if(r!=prevImgWidth){var o=r*t;if(e.dataset.src)for(var a=e.dataset.src,n=a.split("upload/"),i=0;i<n.length;i++){var s=n[0],c=n[1],p=c.split(".")[1];if("jpg"===p)var a=s+"upload/w_"+o+"/"+c;e.src=a}}else{finish(e);for(var d=0;d<l.length;d++)finish(l[d])}},hoverReplicate=function(){for(var e=0;e<cards.length;e++){var t=cards[e];t.classList.contains("hover")&&t.classList.toggle("hover")}this.classList.toggle("hover")},queryMedia=function(e,t){if("all"===status)for(var l=0;l<cards.length;l++){var r=cards[l],e=r.querySelector("img");e.classList.add("deactivated"),loadImage(e,t)}else"single"===status&&(e.classList.add("deactivated"),loadImage(e,t))},toggleMedia=function(e,t,l,r,o){prevImgWidth=Math.ceil(parseInt(getComputedStyle(t,null).getPropertyValue("width"),10)),l.classList.contains("activated")||(scrollPosition=scrollContainer.scrollTop);for(var a=0;a<r.length;a++)r[a].parentNode.classList.toggle("deactivated"),r[a].classList.add("deactivated");l.classList.toggle("activated"),e.querySelector(".tool-shrink").classList.toggle("deactivated"),"all"===status?(status="single",currentImg=t):"single"===status&&(status="all",currentImg=null);for(var n=0;n<o.length;n++)o[n].classList.add("deactivated");l.classList.contains("activated")?scrollContainer.scrollTop=0:scrollContainer.scrollTop=scrollPosition,queryMedia(t,o)};for(var l=0;l<cards.length;l++)!function(){for(var e=cards[l],t=[],r=[],o=0;o<cards.length;o++)if(!cards[o].isSameNode(e)){t.push(cards[o]);var a=cards[o].querySelector("img");a&&r.push(a)}var n=e.querySelector("img"),i=e.parentNode,s=e.querySelector(".tool-expand"),c=e.querySelector(".tool-shrink"),p=[];if(s&&c&&p.push(s,c),n&&n.addEventListener("load",function(){finish(n);for(var e=0;e<r.length;e++)finish(r[e])}),e.addEventListener("touchstart",hoverReplicate),p)for(var d=0;d<p.length;d++){var u=p[d];u.addEventListener("click",function(){toggleMedia(e,n,i,t,r)})}}();window.addEventListener("resize",function(){queryMedia(currentImg)}),queryMedia(status)};
//# sourceMappingURL=jacobsfletch.min.js.map
